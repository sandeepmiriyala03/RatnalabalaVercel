"use client";

import React, { useState, useEffect } from "react";
import {
  Box,
  Button,
  Card,
  CardContent,
  Container,
  Typography,
  Radio,
  RadioGroup,
  FormControlLabel,
  FormControl,
  Divider,
  Snackbar,
  Alert,
} from "@mui/material";

// Define Question type
type Question = {
  question: string;
  options: string[];
  answer: number;
};

// Full 25 questions array typed as Question[]
const allQuestions: Question[] = [
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞™‡±Å‡∞ü‡±ç‡∞ü‡∞ø‡∞® ‡∞ä‡∞∞‡±Å?", options: ["‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞æ‡∞°", "‡∞§‡±ã‡∞≤‡±á‡∞∞‡±Å", "‡∞π‡±à‡∞¶‡∞∞‡∞æ‡∞¨‡∞æ‡∞¶‡±ç", "‡∞§‡∞£‡±Å‡∞ï‡±Å"], answer: 1 },
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞∏‡∞æ‡∞π‡∞ø‡∞§‡±ç‡∞Ø ‡∞™‡∞∞‡∞ø‡∞∂‡±ã‡∞ß‡∞® ‡∞é‡∞µ‡∞∞‡∞ø ‡∞Æ‡±Ä‡∞¶?", options: ["‡∞∂‡±ç‡∞∞‡±Ä‡∞∂‡±ç‡∞∞‡±Ä", "‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞®‡∞æ‡∞• ‡∞∏‡∞§‡±ç‡∞Ø‡∞®‡∞æ‡∞∞‡∞æ‡∞Ø‡∞£", "‡∞ö‡∞æ‡∞ó‡∞Ç‡∞ü‡∞ø", "‡∞∏‡∞ø‡∞®‡∞æ‡∞∞‡±Ü"], answer: 0 },
  { question: "‡∞µ‡∞æ‡∞∞‡±Å ‡∞é‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞≤‡±Å ‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∂‡∞æ‡∞ñ‡∞≤‡±ã ‡∞™‡∞®‡∞ø‡∞ö‡±á‡∞∂‡∞æ‡∞∞‡±Å?", options: ["20", "15", "36", "5"], answer: 2 },
  { question: "‡∞µ‡∞æ‡∞∞‡±Å ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡±Å‡∞∏‡±ç‡∞§‡∞ï‡∞Ç ‡∞™‡±á‡∞∞‡±Å?", options: ["‡∞Æ‡±Å‡∞§‡±ç‡∞Ø‡∞æ‡∞≤‡∞ó‡±ä‡∞°‡±Å‡∞ó‡±Å", "‡∞¨‡∞æ‡∞≤‡∞æ‡∞≠‡∞ø‡∞∞‡∞æ‡∞Æ‡∞Ç", "‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡±Å‡∞¶‡±ç‡∞µ‡±Ä‡∞£‡∞≤‡±Å", "‡∞∏‡±ç‡∞®‡±á‡∞π‡∞¶‡±á‡∞π‡∞≥‡∞ø"], answer: 1 },
  { question: "‡∞µ‡∞æ‡∞∞‡±Å ‡∞°‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±á‡∞ü‡±ç ‡∞™‡±ä‡∞Ç‡∞¶‡∞ø‡∞® ‡∞Ö‡∞Ç‡∞∂‡∞Ç?", options: ["‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ï‡∞∞‡∞£‡∞Ç", "‡∞™‡±ç‡∞∞‡∞æ‡∞ö‡±Ä‡∞® ‡∞ï‡∞µ‡∞ø‡∞§‡±ç‡∞µ‡∞Ç", "‡∞∂‡±ç‡∞∞‡±Ä‡∞∂‡±ç‡∞∞‡±Ä ‡∞∏‡∞æ‡∞π‡∞ø‡∞§‡±ç‡∞Ø‡∞Ç", "‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞"], answer: 2 },
  { question: "‡∞Æ‡∞π‡∞æ‡∞∞‡∞æ‡∞ú‡∞æ ‡∞∏‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§ ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤ ‡∞é‡∞ï‡±ç‡∞ï‡∞° ‡∞â‡∞Ç‡∞¶‡∞ø?", options: ["‡∞π‡±à‡∞¶‡∞∞‡∞æ‡∞¨‡∞æ‡∞¶‡±ç", "‡∞µ‡∞ø‡∞ú‡∞Ø‡∞®‡∞ó‡∞∞‡∞Ç", "‡∞§‡∞£‡±Å‡∞ï‡±Å", "‡∞∞‡∞æ‡∞ú‡∞Æ‡∞Ç‡∞°‡±ç‡∞∞‡∞ø"], answer: 1 },
  { question: "‡∞µ‡∞æ‡∞∞‡±Å ‡∞™‡±ç‡∞∞‡∞Æ‡±Å‡∞ñ‡∞Ç‡∞ó‡∞æ ‡∞Ö‡∞®‡±Å‡∞∏‡∞Ç‡∞ß‡∞æ‡∞®‡∞Æ‡±à‡∞® ‡∞™‡∞§‡±ç‡∞∞‡∞ø‡∞ï?", options: ["‡∞Ü‡∞Ç‡∞ß‡±ç‡∞∞‡∞≠‡±Ç‡∞Æ‡∞ø", "‡∞Ü‡∞Ç‡∞ß‡±ç‡∞∞‡∞ú‡±ç‡∞Ø‡±ã‡∞§‡∞ø", "‡∞§‡∞∞‡∞Ç‡∞ó‡∞ø‡∞£‡∞ø", "‡∞à‡∞®‡∞æ‡∞°‡±Å"], answer: 2 },
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞∞‡∞ö‡∞®‡∞≤‡±Å ‡∞è ‡∞Ö‡∞Ç‡∞∂‡∞æ‡∞≤‡∞™‡±à ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ‡∞ó‡∞æ ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø?", options: ["‡∞µ‡∞ø‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞Ç", "‡∞∏‡∞æ‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞ø‡∞ï ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø‡∞≤‡±Å", "‡∞™‡∞∞‡±ç‡∞Ø‡∞ü‡∞®‡∞≤‡±Å", "‡∞ï‡±ç‡∞∞‡±Ä‡∞°‡∞≤‡±Å"], answer: 1 },
 // { question: "‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡±ç‡∞Ø‡∞ï‡±ç‡∞§‡∞ø‡∞ó‡∞§‡∞Ç‡∞ó‡∞æ ‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞ó‡∞æ‡∞∞‡∞ø‡∞®‡∞ø ‡∞ï‡∞≤‡∞µ‡∞æ‡∞≤‡∞®‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±á ‡∞Ö‡∞°‡∞ó‡∞¨‡±ã‡∞Ø‡±á ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®?", options: ["‡∞™‡±ç‡∞∞‡∞ø‡∞Ø‡∞Æ‡±à‡∞® ‡∞™‡±Å‡∞∏‡±ç‡∞§‡∞ï‡∞Ç", "‡∞Ü‡∞¶‡∞ø ‡∞¨‡∞Ç‡∞ß‡±Å‡∞µ‡±Å‡∞≤‡±Å", "‡∞∏‡±ç‡∞•‡∞ø‡∞∞ ‡∞®‡∞ø‡∞µ‡∞æ‡∞∏‡∞Ç", "‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡±á‡∞ï ‡∞∂‡∞ï‡±ç‡∞§‡±Å‡∞≤‡±Å"], answer: 0 },
  { question: "‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞∏‡∞æ‡∞Æ‡∞æ‡∞ú‡∞ø‡∞ï ‡∞Ö‡∞Ç‡∞∂‡∞Ç ‡∞Ü‡∞Ø‡∞® ‡∞∞‡∞ö‡∞®‡∞≤‡±ç‡∞≤‡±ã ‡∞è‡∞¶‡∞ø?", options: ["‡∞Ö‡∞ï‡±ç‡∞∑‡∞∞‡∞æ‡∞∏‡±ç‡∞Ø‡∞§", "‡∞™‡∞∞‡±ç‡∞Ø‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç", "‡∞∏‡∞Æ‡∞æ‡∞®‡∞§‡±ç‡∞µ‡∞Ç", "‡∞Ö‡∞®‡±ç‡∞®‡∞ø"], answer: 3 },
  { question: "‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞≠‡∞æ‡∞∑‡∞≤‡±ã ‡∞Ü‡∞Ø‡∞® ‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞™‡±Å‡∞∞‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç ‡∞è‡∞¶‡∞ø?", options: ["‡∞ú‡∞æ‡∞§‡±Ä‡∞Ø ‡∞Ö‡∞µ‡∞æ‡∞∞‡±ç‡∞°‡±Å", "‡∞á‡∞Ç‡∞°‡∞ø‡∞™‡±Ü‡∞Ç‡∞°‡±Ü‡∞®‡±ç‡∞∏‡±ç ‡∞Ö‡∞µ‡∞æ‡∞∞‡±ç‡∞°‡±Å", "‡∞ï‡∞µ‡∞ø ‡∞™‡∞∞‡∞Æ‡∞æ‡∞£‡±Å", "‡∞Ö‡∞≠‡∞ø‡∞®‡∞Ç‡∞¶‡∞®"], answer: 0 },
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞™‡±ç‡∞∞‡∞§‡∞ø‡∞∑‡±ç‡∞†‡∞æ‡∞§‡±ç‡∞Æ‡∞ï ‡∞™‡∞§‡±ç‡∞∞‡∞ø‡∞ï?", options: ["‡∞∏‡∞æ‡∞π‡∞ø‡∞§‡±ç‡∞Ø‡∞Ç", "‡∞∏‡∞Ç‡∞™‡∞æ‡∞¶‡∞ï ‡∞∏‡∞Ç‡∞ò‡∞Ç", "‡∞§‡∞∞‡∞Ç‡∞ó‡∞ø‡∞£‡∞ø", "‡∞µ‡±á‡∞¶‡∞æ‡∞Ç‡∞§"], answer: 2 },
  //{ question: "‡∞µ‡∞æ‡∞∞‡∞ø ‡∞ú‡±Ä‡∞µ‡∞ø‡∞§‡∞Ç‡∞≤‡±ã ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Æ‡±à‡∞® ‡∞∏‡∞Ç‡∞ò‡∞ü‡∞® ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", options: ["‡∞π‡±É‡∞¶‡±ç‡∞∞‡±ã‡∞ó ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø‡∞≤‡±Å", "‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤ ‡∞â‡∞™‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Å‡∞°‡±Å", "‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞•‡∞æ‡∞™‡∞ï‡±Å‡∞°‡±Å", "‡∞™‡∞∞‡∞ø‡∞∂‡±ã‡∞ß‡∞ï‡±Å‡∞°‡±Å"], answer: 0 },
  { question: "‡∞µ‡∞æ‡∞∞‡∞ø ‡∞ï‡∞µ‡∞ø‡∞§‡±ç‡∞µ‡∞Ç‡∞≤‡±ã ‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞®‡∞Ç‡∞ó‡∞æ ‡∞™‡±Ü‡∞∞‡∞ø‡∞ó‡∞ø‡∞® ‡∞Ö‡∞Ç‡∞∂‡∞Ç?", options: ["‡∞∏‡∞æ‡∞Æ‡∞æ‡∞ú‡∞ø‡∞ï ‡∞¨‡∞æ‡∞ß‡±ç‡∞Ø‡∞§", "‡∞™‡±ç‡∞∞‡±á‡∞Æ", "‡∞™‡±ç‡∞∞‡∞ï‡±É‡∞§‡∞ø", "‡∞Ö‡∞Ç‡∞§‡∞∞‡∞Ç‡∞ó‡∞Ç"], answer: 0 },
  { question: "‡∞µ‡∞æ‡∞∞‡∞ø ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤ ‡∞™‡±á‡∞∞‡±Å?", options: ["‡∞∞‡∞æ‡∞ú‡∞æ‡∞∞‡∞æ‡∞µ‡±ç ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "‡∞Æ‡∞π‡∞æ‡∞∞‡∞æ‡∞ú‡∞æ ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "‡∞Æ‡∞ø‡∞§‡±ç‡∞∞ ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "‡∞Ü‡∞ö‡∞æ‡∞∞‡±ç‡∞Ø ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤"], answer: 0 },
  { question: "‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞∞‡∞ö‡∞®‡∞≤‡±ã ‡∞µ‡±Ä‡∞∞‡±Å ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞ø‡∞® ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Ç ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø?", options: ["‡∞®‡±Ç‡∞§‡∞® ‡∞≠‡∞æ‡∞µ‡∞®", "‡∞™‡∞æ‡∞∞‡∞Ç‡∞™‡∞∞‡±ç‡∞Ø ‡∞∂‡±à‡∞≤‡∞ø", "‡∞™‡±ç‡∞∞‡∞Ø‡±ã‡∞ó‡∞æ‡∞§‡±ç‡∞Æ‡∞ï ‡∞™‡∞¶‡±ç‡∞¶‡∞§‡∞ø", "‡∞ï‡∞•‡∞æ‡∞®‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å"], answer: 2 },
  { question: "‡∞µ‡∞æ‡∞∞‡∞ø ‡∞™‡±Å‡∞∏‡±ç‡∞§‡∞ï‡∞æ‡∞≤‡∞≤‡±ã ‡∞è‡∞¶‡±Ä ‡∞¨‡∞æ‡∞≤‡∞∏‡∞æ‡∞π‡∞ø‡∞§‡±ç‡∞Ø‡∞Ç ‡∞ï‡∞æ‡∞¶‡±Å?", options: ["‡∞¨‡∞æ‡∞≤‡∞æ‡∞≠‡∞ø‡∞∞‡∞æ‡∞Æ‡∞Ç", "‡∞∏‡∞æ‡∞π‡∞ø‡∞§‡±ç‡∞Ø ‡∞™‡∞¶‡∞ï‡±ã‡∞∂‡∞Ç", "‡∞∏‡±ç‡∞®‡±á‡∞π‡∞¶‡±á‡∞π‡∞≥‡∞ø", "‡∞µ‡∞ø‡∞µ‡±á‡∞ï‡∞™‡∞ü‡±ç‡∞ü‡∞£‡∞Ç"], answer: 1 },
  //{ question: "‡∞µ‡∞æ‡∞∞‡∞ø ‡∞á‡∞¶‡±ç‡∞¶‡∞∞‡±Å ‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞≤ ‡∞™‡±á‡∞∞‡±ç‡∞≤‡±Å ‡∞è‡∞µ‡∞ø?", options: ["‡∞∞‡∞Æ‡∞£‡±Ä‡∞Ø, ‡∞ï‡∞Æ‡∞®‡±Ä‡∞Ø", "‡∞∏‡±Å‡∞ß‡∞æ‡∞∞‡∞æ‡∞£‡∞ø, ‡∞ï‡∞Æ‡∞®‡±Ä‡∞Ø", "‡∞∏‡±Å‡∞ß‡∞æ‡∞∞‡∞æ‡∞£‡∞ø, ‡∞∂‡±ç‡∞∞‡±Ä‡∞ß‡∞∞‡±ç", "‡∞ï‡∞Æ‡∞®‡∞æ, ‡∞∏‡±Å‡∞ß‡∞æ"], answer: 2 },
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡±Å ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ‡∞ó‡∞æ ‡∞è ‡∞≠‡∞æ‡∞∑‡∞≤‡±ã ‡∞∞‡∞ö‡∞®‡∞≤‡±Å ‡∞ö‡±á‡∞∂‡∞æ‡∞∞‡±Å?", options: ["‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å", "‡∞π‡∞ø‡∞Ç‡∞¶‡±Ä", "‡∞∏‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞Ç", "‡∞á‡∞Ç‡∞ó‡±ç‡∞≤‡±Ä‡∞∑‡±ç"], answer: 0 },
  { question: "‡∞µ‡∞æ‡∞∞‡±Å ‡∞™‡±ç‡∞∞‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞ø ‡∞ö‡±Ü‡∞Ç‡∞¶‡∞ø‡∞® ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤ ‡∞è‡∞¶‡∞ø?", options: ["‡∞ï‡±Ç‡∞®‡∞µ‡∞∞‡∞Ç ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "‡∞π‡±à‡∞¶‡∞∞‡∞æ‡∞¨‡∞æ‡∞¶‡±ç ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "‡∞Ö‡∞®‡∞Ç‡∞§‡∞™‡±Å‡∞∞ ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "‡∞§‡∞£‡±Å‡∞ï‡±Å ‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤"], answer: 2 },
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞ï‡±ä‡∞§‡±ç‡∞§‡∞ó‡∞æ ‡∞®‡±á‡∞∞‡±ç‡∞ö‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®‡∞¶‡∞ø ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", options: ["‡∞Ü‡∞Ø‡∞® ‡∞∏‡∞æ‡∞π‡∞ø‡∞§‡±ç‡∞Ø‡∞Ç", "‡∞Ü‡∞Ø‡∞® ‡∞ú‡±Ä‡∞µ‡∞ø‡∞§‡∞Ç", "‡∞Ü‡∞Ø‡∞® ‡∞™‡±Å‡∞∞‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞æ‡∞≤‡±Å", "‡∞™‡±à‡∞®‡∞ø‡∞µ‡∞®‡±ç‡∞®‡∞æ‡∞∞‡±Å"], answer: 3 },
  { question: "‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞∞‡∞ö‡∞®‡∞≤‡±Å ‡∞è ‡∞¶‡±á‡∞∂‡±Ä‡∞Ø ‡∞™‡∞§‡±ç‡∞∞‡∞ø‡∞ï‡∞≤‡±ã ‡∞™‡±ç‡∞∞‡∞ö‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡±ç?", options: ["‡∞Ü‡∞Ç‡∞ß‡±ç‡∞∞‡∞ú‡±ç‡∞Ø‡±ã‡∞§‡∞ø", "‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞ú‡∞ó‡∞§‡±ç", "‡∞à‡∞®‡∞æ‡∞°‡±Å", "‡∞Æ‡∞Ç‡∞§‡±ç‡∞∞‡∞ø‡∞Æ‡∞Ç‡∞°‡∞≤‡∞ø"], answer: 0 },
];

// Utility: random select N unique questions from array without mutating original
function getRandomQuestions(allQ: Question[], n: number): Question[] {
  const shuffled = [...allQ].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, n);
}

export default function MiraQuizPage() {
  const [questions, setQuestions] = useState<Question[]>([]);
  const [answers, setAnswers] = useState<(number | null)[]>([]);
  const [showResult, setShowResult] = useState(false);
  const [score, setScore] = useState(0);
  const [snackbarOpen, setSnackbarOpen] = useState(false);

  useEffect(() => {
    const selected = getRandomQuestions(allQuestions, 5);
    setQuestions(selected);
    setAnswers(Array(5).fill(null));
  }, []);

  const handleChange = (qIdx: number, optionIdx: number) => {
    const updatedAnswers = [...answers];
    updatedAnswers[qIdx] = optionIdx;
    setAnswers(updatedAnswers);
  };

  const handleSubmit = () => {
    if (answers.includes(null)) {
      setSnackbarOpen(true);
      return;
    }
    let correct = 0;
    answers.forEach((ans, idx) => {
      if (ans === questions[idx].answer) correct++;
    });
    setScore(correct);
    setShowResult(true);
  };

  const handleReset = () => {
    const selected = getRandomQuestions(allQuestions, 5);
    setQuestions(selected);
    setAnswers(Array(5).fill(null));
    setShowResult(false);
    setScore(0);
  };

const shareText = `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
üéâ *‡∞Æ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞∞‡∞æ‡∞Æ‡∞ï‡±É‡∞∑‡±ç‡∞£ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞ï‡±ç‡∞µ‡∞ø‡∞ú‡±ç ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç* üéâ
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üóìÔ∏è *‡∞§‡±á‡∞¶‡±Ä:* ${new Date().toLocaleDateString('te-IN', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
})}

üèÜ  *‡∞Æ‡±Ä ‡∞∏‡±ç‡∞ï‡±ã‡∞∞‡±Å:*
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${"‚≠ê".repeat(score)}${"‚òÜ".repeat(5 - score)}  (${score} / 5)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üöÄ ‡∞Ö‡∞≠‡∞ø‡∞®‡∞Ç‡∞¶‡∞®‡∞≤‡±Å! ‡∞Æ‡±Ä ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞Ç ‡∞Æ‡∞ø‡∞®‡±ç‡∞®‡∞ó‡∞æ ‡∞Æ‡±Ü‡∞∞‡∞ø‡∞∏‡∞ø‡∞™‡±ã‡∞§‡±ã‡∞Ç‡∞¶‡∞ø!

üìö ‡∞Æ‡∞∞‡∞ø‡∞®‡±ç‡∞®‡∞ø ‡∞ï‡±ç‡∞µ‡∞ø‡∞ú‡±ç‚Äå‡∞≤‡∞§‡±ã ‡∞ï‡∞≤‡∞ø‡∞∏‡∞ø ‡∞ö‡∞¶‡∞µ‡∞Ç‡∞°‡∞ø,
üëâ https://ratnalabala.vercel.app/

‚ù§Ô∏è ‡∞Æ‡±Ä ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤‡∞§‡±ã ‡∞à ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø!
#Ratnalabala
`;

const handleShareWhatsApp = () => {
  const url = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
  window.open(url, "_blank");
};


  return (
    <Container maxWidth="sm" sx={{ py: 4 }}>
      <Card>
        <CardContent>
          <Typography variant="h4" align="center" gutterBottom fontWeight="bold">
            ‡∞Æ‡∞ø‡∞∞‡∞æ ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞Æ‡±Ä‡∞¶ ‡∞ï‡±ç‡∞µ‡∞ø‡∞ú‡±ç
          </Typography>

          {questions.map((q, idx) => (
            <Box key={idx} sx={{ mb: 3 }}>
              <Typography variant="h6" sx={{ mb: 1 }}>
                {`Q${idx + 1}. ${q.question}`}
              </Typography>
              <FormControl component="fieldset">
                <RadioGroup
                  value={answers[idx]}
                  onChange={(_, val) => handleChange(idx, Number(val))}
                >
                  {q.options.map((opt, i) => (
                    <FormControlLabel key={i} value={i} control={<Radio />} label={opt} disabled={showResult} />
                  ))}
                </RadioGroup>
              </FormControl>
              <Divider sx={{ mt: 1 }} />
            </Box>
          ))}

          {!showResult ? (
            <Button
              variant="contained"
              color="primary"
              fullWidth
              disabled={answers.includes(null)}
              onClick={handleSubmit}
              sx={{ mt: 2 }}
            >
              ‡∞∏‡∞Æ‡∞∞‡±ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
            </Button>
          ) : (
            <Box sx={{ mt: 3, textAlign: "center" }}>
              <Typography variant="h5" gutterBottom fontWeight="bold">
                ‡∞Ö‡∞≠‡∞ø‡∞®‡∞Ç‡∞¶‡∞®‡∞≤‡±Å! ‡∞Æ‡±Ä‡∞∞‡±Å {score} / 5 ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Å‡∞≤‡±Å ‡∞∏‡∞æ‡∞ß‡∞ø‡∞Ç‡∞ö‡∞æ‡∞∞‡±Å!
              </Typography>
              <Typography variant="subtitle1" sx={{ mb: 3 }}>
                ‡∞∂‡∞æ‡∞§‡∞Ç: {((score / 5) * 100).toFixed(2)}%
              </Typography>
              <Button variant="contained" color="success" sx={{ mb: 2 }} onClick={handleShareWhatsApp}>
                ‡∞∏‡±ç‡∞ï‡±ã‡∞∞‡±Å ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø - ‡∞µ‡∞æ‡∞ü‡±ç‡∞∏‡∞æ‡∞™‡±ç
              </Button>
              <br />
              <Button variant="outlined" onClick={handleReset}>
                ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
              </Button>
            </Box>
          )}
        </CardContent>
      </Card>

      <Snackbar
        open={snackbarOpen}
        autoHideDuration={3000}
        onClose={() => setSnackbarOpen(false)}
        anchorOrigin={{ vertical: "bottom", horizontal: "center" }}
      >
        <Alert severity="warning" sx={{ width: "100%" }}>
          ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡∞ï‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞æ‡∞≤‡±Å ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø.
        </Alert>
      </Snackbar>
    </Container>
  );
}
